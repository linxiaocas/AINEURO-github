<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="fetchGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1976d2"/>
      <stop offset="100%" style="stop-color:#0d47a1"/>
    </linearGradient>
    <linearGradient id="decodeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#388e3c"/>
      <stop offset="100%" style="stop-color:#1b5e20"/>
    </linearGradient>
    <linearGradient id="executeGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#f57c00"/>
      <stop offset="100%" style="stop-color:#e65100"/>
    </linearGradient>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="400" fill="#fafafa"/>
  
  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#333">
    Instruction Execution Cycle / 指令执行周期
  </text>
  
  <!-- CPU Cycle Boxes -->
  <g transform="translate(100, 80)">
    <!-- FETCH -->
    <rect x="0" y="0" width="180" height="100" rx="10" fill="url(#fetchGrad)"/>
    <text x="90" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="white">FETCH</text>
    <text x="90" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="white">取指</text>
    <text x="90" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">PC → Memory</text>
    
    <!-- Arrow -->
    <path d="M 190,50 L 220,50" stroke="#666" stroke-width="3" marker-end="url(#arrowhead)"/>
    
    <!-- DECODE -->
    <rect x="230" y="0" width="180" height="100" rx="10" fill="url(#decodeGrad)"/>
    <text x="320" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="white">DECODE</text>
    <text x="320" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="white">译码</text>
    <text x="320" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">IR → Control</text>
    
    <!-- Arrow -->
    <path d="M 420,50 L 450,50" stroke="#666" stroke-width="3" marker-end="url(#arrowhead)"/>
    
    <!-- EXECUTE -->
    <rect x="460" y="0" width="180" height="100" rx="10" fill="url(#executeGrad)"/>
    <text x="550" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="white">EXECUTE</text>
    <text x="550" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" fill="white">执行</text>
    <text x="550" y="120" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">ALU → Write</text>
  </g>
  
  <!-- Feedback loop -->
  <path d="M 730,130 Q 750,200 400,200 Q 50,200 50,130" 
        stroke="#999" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
  <text x="400" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">Update PC / 更新程序计数器 → Next Instruction / 下一条指令</text>
  
  <!-- Neural Analog Comparison -->
  <g transform="translate(100, 260)">
    <text x="300" y="0" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333">
      Neural Processing Analog / 神经处理类比
    </text>
    
    <!-- Comparison table -->
    <rect x="0" y="20" width="600" height="100" fill="white" stroke="#ddd" stroke-width="2" rx="5"/>
    
    <text x="20" y="50" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1976d2">CPU:</text>
    <text x="80" y="50" font-family="Arial, sans-serif" font-size="13" fill="#333">Fetch → Decode → Execute → Write → Update PC</text>
    
    <text x="20" y="75" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#c62828">Neuron:</text>
    <text x="80" y="75" font-family="Arial, sans-serif" font-size="13" fill="#333">Dendritic Input → Synaptic Integration → Threshold Decision → Action Potential → Axonal Transmission</text>
    
    <text x="20" y="100" font-family="Arial, sans-serif" font-size="13" fill="#666">树突输入 → 突触整合 → 阈值决策 → 动作电位 → 轴突传输</text>
  </g>
  
  <!-- Legend -->
  <text x="400" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#999">
    Figure 4.2: The instruction execution cycle parallels neural information processing stages.
  </text>
</svg>